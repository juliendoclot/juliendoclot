---
import { Image } from 'astro:assets';
import type { CollectionEntry } from 'astro:content';
import FormattedDate from './FormattedDate.astro';

interface Props {
	post: CollectionEntry<'blog'>;
}

const { post } = Astro.props;
const { title, description, pubDate, heroImage, tags } = post.data;
---

<article class="group">
	<a href={`/blog/${post.id}/`} class="block no-underline">
		<div class="card-dark aspect-[4/3] relative p-1">
			<!-- Inner container with image -->
			<div class="relative w-full h-full rounded-xl overflow-hidden">
				<!-- Background Image -->
				{heroImage && (
					<Image
						src={heroImage}
						alt={title}
						width={600}
						height={450}
						class="absolute inset-0 w-full h-full object-cover opacity-30 group-hover:opacity-40 group-hover:scale-105 transition-all duration-500"
					/>
				)}

				<!-- Dark overlay gradient -->
				<div class="absolute inset-0 bg-gradient-to-t from-[#0f172a] via-[#0f172a]/90 to-[#1e1b4b]/60" />

				<!-- Grid pattern overlay for tech feel -->
				<div class="absolute inset-0 opacity-10" style="background-image: linear-gradient(rgba(99, 102, 241, 0.1) 1px, transparent 1px), linear-gradient(90deg, rgba(99, 102, 241, 0.1) 1px, transparent 1px); background-size: 20px 20px;" />

				<!-- Content -->
				<div class="absolute inset-0 p-6 flex flex-col justify-end">
					<!-- Large title overlay effect -->
					<h3 class="text-2xl md:text-3xl font-bold text-white mb-3 leading-tight group-hover:text-indigo-300 transition-colors duration-300">
						{title}
					</h3>

					<!-- Description -->
					<p class="text-gray-400 text-sm line-clamp-2 mb-4">
						{description}
					</p>

					<!-- Bottom row: tags + date -->
					<div class="flex items-center justify-between">
						{tags && tags.length > 0 && (
							<div class="flex gap-2">
								{tags.slice(0, 2).map((tag) => (
									<span class="px-3 py-1 text-xs font-medium rounded-full bg-indigo-500/20 text-indigo-300 border border-indigo-500/30 capitalize">
										{tag}
									</span>
								))}
							</div>
						)}
						<span class="text-xs text-gray-500">
							<FormattedDate date={pubDate} />
						</span>
					</div>
				</div>

				<!-- Decorative corner elements -->
				<div class="absolute top-4 right-4 w-8 h-8 border-t-2 border-r-2 border-indigo-500/20 rounded-tr-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300" />
				<div class="absolute bottom-4 left-4 w-8 h-8 border-b-2 border-l-2 border-indigo-500/20 rounded-bl-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300" />
			</div>
		</div>
	</a>
</article>
